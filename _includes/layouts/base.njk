<!doctype html>
<html {% if section %} data-current="{{ section }}"{% endif %} lang="en">
  {% include "components/head.njk" %}

  <body>
    <m-universal-header></m-universal-header>
    <m-website-header name="Design System"></m-website-header>

    <main class="viewport-container">
      <div class="page">
        <nav aria-label="breadcrumb" class="breadcrumbs">
          {% set navBreadcrumbs = collections.all | eleventyNavigationBreadcrumb(eleventyNavigation.key) %}

          <!-- 
          Thoughts on using <style> inline
          ===
          
          f product end modifications are made to styles
          and mutual components, take the organization benefits of
          CSS-in-JS learned from React Search and Public Website,
          and put those modifications together so changes don't require
          understanding of the file organization of the project.

          This encourages contributions by increasing the usability
          of making code changes has fewer steps and requires less
          prior knowedge (eg, understanding codebase organization).

          It's supported in all browsers and performant too.

          ¯\_(ツ)_/¯
          -->
          <style>
            .pages--nested {
              li li {
                border: none !important;
              }
            }
          </style>
          <ol>
            <li>
              <a href="/">Welcome</a>
            </li>
            {%- for entry in navBreadcrumbs %}
              <li>
                <a href="{{ entry.url | url }}">{{ entry.title }}</a>
              </li>
            {%- endfor %}
            <li>
              <a href={page.url} aria-current="page">{{ eleventyNavigation.key }}</a>
            </li>
          </ol>
        </nav>

        <h1 class="page-heading">{{ title }}</h1>

        <div class="page-content prose" style="grid-area: grouping;">
          {{ layoutContent | safe }}
        </div>

        <nav aria-labelled-by="neighbors-heading" class="aside-nav">
          <h2 class="page-sub-sub-heading" id="neighbors-heading">Pages</h2>

          {% set navPages = collections.all | eleventyNavigation %}
          {% macro renderNavListItem(entry) -%}
            <li>
              <a href="{{ entry.url | url }}">{{ entry.title }}</a>
              {%- if entry.children.length -%}
                <ul>
                  {%- for child in entry.children %}{{ renderNavListItem(child) }}
                  {% endfor -%}
              </ul>
            {%- endif -%}
          </li>
        {%- endmacro %}

        <ol class="pages--nested">
          {%- for entry in navPages %}{{ renderNavListItem(entry) }}
          {%- endfor -%}
        </ol>
      </nav>
    </div>
  </main>
</body>
</html>